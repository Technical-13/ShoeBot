<!DOCTYPE html>
<html>
  <head>
    <title>Guilds | &lt;bot&gt;</title>
    <script type="module">
      const guildSelector = document.getElementById( 'guild-selector-input' );
      const clearButton = document.getElementById( 'clear-button' );
      const goButton = document.getElementById( 'go-button' );

      function handleInput() {
        if ( !guildSelector.value ) {
          clearButton.disabled = true;
          goButton.disabled = true;
        }
        else {
          clearButton.disabled = false;
          goButton.disabled = false;
        }
      }

      function handleGo() {
        let addSlash = ( location.href.charAt( location.href.length - 1 ) != '/' ? '/' : '' );
        let guildId = Array.from( document.querySelectorAll( 'option' ) ).find( opt => opt.value === guildSelector.value ).attributes.data.value;
        location.href += addSlash + guildId;
      }

      function handleClear() {
        guildSelector.value = '';
        clearButton.disabled = true;
        goButton.disabled = true;
        goButton.onclick = null;
      }

      guildSelector.addEventListener( 'input', handleInput );
      goButton.addEventListener( 'click', handleGo );
      goButton.addEventListener( 'touchstart', handleGo );
      clearButton.addEventListener( 'click', handleClear );
      clearButton.addEventListener( 'touchstart', handleClear );
    </script>
  </head>
  <body>
    <h1>Looking for a server I am in?</h1>
    <label for="guild-selector">Choose a server:</label>
    <input id="guild-selector-input" list="guild-selector" placeholder="Start typing...">
    <datalist name="guilds" id="guild-selector">
    </datalist>
    <button id="go-button" type="button" disabled>Go!</button>
    <button id="clear-button" type="button" disabled>Clear!</button>
  </body>
</html>